package main

import (
	"encoding/json"
	"fmt"
	"gopkg.in/yaml.v3"
	"os"
)

// clang-format -style=google -dump-config > .clang-format

func main() {
	config := ClangFormatConfig{
		QualifierAlignment:                           "",
		AlwaysBreakAfterDefinitionReturnType:         "None",
		AlwaysBreakBeforeMultilineStrings:            false,
		BreakBeforeTernaryOperators:                  false,
		BreakFunctionDefinitionParameters:            false,
		BreakInheritanceList:                         "",
		JavaScriptWrapImports:                        false,
		PenaltyBreakOpenParenthesis:                  0,
		RemoveBracesLLVM:                             false,
		AllowShortLoopsOnASingleLine:                 false,
		AttributeMacros:                              nil,
		StatementMacros:                              nil,
		AllowAllParametersOfDeclarationOnNextLine:    false,
		DerivePointerAlignment:                       false,
		InsertBraces:                                 false,
		PenaltyBreakComment:                          0,
		PenaltyBreakTemplateDeclaration:              0,
		SpacesBeforeTrailingComments:                 0,
		AlignConsecutiveMacros:                       AlignConsecutiveMacros{},
		AllowBreakBeforeNoexceptSpecifier:            "",
		BreakStringLiterals:                          false,
		ExperimentalAutoDetectBinPacking:             false,
		AlignTrailingComments:                        AlignTrailingComments{},
		IndentWrappedFunctionNames:                   false,
		MacroBlockEnd:                                "",
		PenaltyIndentedWhitespace:                    0,
		DisableFormat:                                false,
		JavaScriptQuotes:                             "",
		KeepFormFeed:                                 false,
		RemoveEmptyLinesInUnwrappedLines:             false,
		RemoveParentheses:                            "",
		SkipMacroDefinitionBody:                      false,
		SpaceAfterTemplateKeyword:                    false,
		SpaceBeforeJsonColon:                         false,
		IncludeBlocks:                                "",
		RawStringFormats:                             nil,
		SpacesInLineCommentPrefix:                    SpacesInLineCommentPrefix{},
		BreakArrays:                                  false,
		CompactNamespaces:                            false,
		IndentGotoLabels:                             false,
		IndentPPDirectives:                           "",
		SortUsingDeclarations:                        "",
		SpaceBeforeInheritanceColon:                  false,
		AlignConsecutiveTableGenBreakingDAGArgColons: AlignConsecutiveTableGenBreakingDAGArgColons{},
		AlignEscapedNewlines:                         "",
		AllowShortFunctionsOnASingleLine:             "All",
		AlignConsecutiveBitFields:                    AlignConsecutiveBitFields{},
		TabWidth:                                     0,
		AlignConsecutiveTableGenCondOperatorColons:   AlignConsecutiveTableGenCondOperatorColons{},
		IncludeIsMainSourceRegex:                     "",
		IndentCaseBlocks:                             false,
		PackConstructorInitializers:                  "",
		PenaltyBreakBeforeMemberAccess:               0,
		WrapNamespaceBodyWithEmptyLines:              "",
		PenaltyExcessCharacter:                       0,
		AllowShortNamespacesOnASingleLine:            false,
		BinPackArguments:                             false,
		IndentAccessModifiers:                        false,
		LambdaBodyIndentation:                        "Block", // 修复点：Signature改为Block
		PenaltyBreakScopeResolution:                  0,
		PPIndentWidth:                                0,
		SeparateDefinitionBlocks:                     "",
		AlignOperands:                                "",
		AllowShortIfStatementsOnASingleLine:          "",
		BitFieldColonSpacing:                         "",
		BraceWrapping:                                BraceWrapping{},
		BreakAfterAttributes:                         "",
		ShortNamespaceLines:                          0,
		SpaceBeforeCpp11BracedList:                   false,
		SpaceBeforeCtorInitializerColon:              false,
		IndentRequiresClause:                         false,
		MacroBlockBegin:                              "",
		PenaltyReturnTypeOnItsOwnLine:                0,
		AllowShortCaseLabelsOnASingleLine:            false,
		AlignConsecutiveDeclarations:                 AlignConsecutiveDeclarations{},
		BreakBeforeBinaryOperators:                   "",
		SpaceBeforeParens:                            "",
		SpaceBeforeParensOptions:                     SpaceBeforeParensOptions{},
		AllowShortBlocksOnASingleLine:                "",
		IncludeCategories:                            nil,
		ReflowComments:                               "",
		RemoveSemicolon:                              false,
		SpacesInAngles:                               "",
		SpacesInContainerLiterals:                    false,
		SpacesInParensOptions:                        SpacesInParensOptions{},
		WhitespaceSensitiveMacros:                    nil,
		AllowShortCaseExpressionOnASingleLine:        false,
		ColumnLimit:                                  80,
		IndentExportBlock:                            false,
		IndentExternBlock:                            "",
		SpaceBeforeRangeBasedForLoopColon:            false,
		AccessModifierOffset:                         -1,
		InsertNewlineAtEOF:                           false,
		SpaceBeforeCaseColon:                         false,
		SpaceBeforeSquareBrackets:                    false,
		UseTab:                                       "",
		Language:                                     "Cpp",
		AlignConsecutiveAssignments:                  AlignConsecutiveAssignments{},
		AlignConsecutiveShortCaseStatements:          AlignConsecutiveShortCaseStatements{},
		AllowAllArgumentsOnNextLine:                  false,
		LineEnding:                                   "",
		NamespaceIndentation:                         "",
		ObjCSpaceAfterProperty:                       false,
		SpaceInEmptyBlock:                            false,
		AlignConsecutiveTableGenDefinitionColons:     AlignConsecutiveTableGenDefinitionColons{},
		IndentCaseLabels:                             false,
		PenaltyBreakFirstLessLess:                    0,
		ReferenceAlignment:                           "",
		SpacesInSquareBrackets:                       false,
		Standard:                                     "",
		BreakAfterJavaFieldAnnotations:               false,
		EmptyLineBeforeAccessModifier:                "",
		MainIncludeChar:                              "",
		StatementAttributeLikeMacros:                 nil,
		TableGenBreakInsideDAGArg:                    "",
		Cpp11BracedListStyle:                         false,
		ObjCBinPackProtocolList:                      "",
		AlignAfterOpenBracket:                        "",
		AlignArrayOfStructures:                       "",
		IntegerLiteralSeparator:                      IntegerLiteralSeparator{},
		KeepEmptyLines:                               KeepEmptyLines{},
		MaxEmptyLinesToKeep:                          0,
		ObjCBlockIndentWidth:                         0,
		PenaltyBreakString:                           0,
		SpaceAroundPointerQualifiers:                 "",
		BreakAdjacentStringLiterals:                  false,
		BreakAfterReturnType:                         "None",
		BreakBeforeBraces:                            "",
		BreakTemplateDeclarations:                    false,
		RequiresClausePosition:                       "",
		SortIncludes:                                 "",
		SpacesInParens:                               "",
		AllowShortEnumsOnASingleLine:                 false,
		BreakBeforeConceptDeclarations:               "",
		BreakBeforeInlineASMColon:                    "",
		IndentWidth:                                  2,
		InsertTrailingCommas:                         "",
		SortJavaStaticImport:                         "",
		VerilogBreakBetweenInstancePorts:             false,
		AllowShortLambdasOnASingleLine:               "",
		BinPackParameters:                            "",
		PenaltyBreakBeforeFirstCallParameter:         0,
		SpaceAfterCStyleCast:                         false,
		SpaceBeforeAssignmentOperators:               false,
		ForEachMacros:                                nil,
		ObjCBreakBeforeNestedBlockParam:              false,
		PointerAlignment:                             "",
		AllowShortCompoundRequirementOnASingleLine:   false,
		BreakConstructorInitializers:                 "",
		PenaltyBreakAssignment:                       0,
		RequiresExpressionIndentation:                "",
		SpaceAfterLogicalNot:                         false,
		BreakBinaryOperations:                        "",
		FixNamespaceComments:                         false,
		IfMacros:                                     nil,
		IncludeIsMainRegex:                           "",
		ObjCSpaceBeforeProtocolList:                  false,
		CommentPragmas:                               "",
		ConstructorInitializerIndentWidth:            0,
		ContinuationIndentWidth:                      0,
		EmptyLineAfterAccessModifier:                 "",
	}

	// 生成YAML配置文件
	yamlData, _ := yaml.Marshal(config)
	os.WriteFile(".clang-format", yamlData, 0644)
	fmt.Println("Generated .clang-format")

	// 生成JSON（非必需）
	jsonData, _ := json.MarshalIndent(config, "", "  ")
	os.WriteFile("clang-format.json", jsonData, 0644)
	fmt.Println("Generated clang-format.json")
}
